<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Previous meta tags and CDN links remain the same -->
    <!-- Add this new script for download functionality -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <!-- Previous navigation and header remain the same -->

    <!-- Updated Download Section -->
    <div class="container">
        <div class="main-container text-center">
            <!-- ... (previous content) ... -->
            
            <div class="input-group mb-4">
                <input type="text" class="form-control form-control-lg" id="videoUrl" 
                       placeholder="Paste YouTube or Instagram link here...">
                <button class="btn download-btn" type="button" id="downloadBtn">
                    <i class="fas fa-download me-2"></i> Download
                </button>
            </div>
            
            <div id="result" class="mb-4"></div>
            
            <!-- Download Options (Shown after processing) -->
            <div id="downloadOptions" class="text-start mt-4" style="display:none;">
                <h5>Available Formats:</h5>
                <div id="formatList" class="list-group mb-3"></div>
                <div id="videoPreview" class="mb-3"></div>
            </div>
            
            <!-- ... (rest of your previous content) ... -->
        </div>
    </div>

    <!-- Updated Script -->
    <script>
        document.getElementById('downloadBtn').addEventListener('click', async function() {
            const videoUrl = document.getElementById('videoUrl').value.trim();
            const resultDiv = document.getElementById('result');
            const optionsDiv = document.getElementById('downloadOptions');
            
            if (!videoUrl) {
                resultDiv.innerHTML = '<div class="alert alert-danger">Please enter a video URL!</div>';
                return;
            }
            
            resultDiv.innerHTML = '<div class="alert alert-info"><i class="fas fa-spinner fa-spin me-2"></i> Processing your video...</div>';
            optionsDiv.style.display = 'none';
            
            try {
                // Use your own backend API endpoint here
                const response = await axios.post('https://your-backend-api.com/download', {
                    url: videoUrl
                });
                
                const data = response.data;
                
                if (data.success) {
                    resultDiv.innerHTML = '<div class="alert alert-success"><i class="fas fa-check-circle me-2"></i> Video processed successfully!</div>';
                    
                    // Show formats
                    const formatList = document.getElementById('formatList');
                    formatList.innerHTML = '';
                    
                    data.formats.forEach(format => {
                        const formatItem = document.createElement('a');
                        formatItem.href = format.url;
                        formatItem.className = 'list-group-item list-group-item-action';
                        formatItem.innerHTML = `
                            <div class="d-flex justify-content-between">
                                <span>${format.quality} (${format.type})</span>
                                <span>${format.size}</span>
                            </div>
                        `;
                        formatItem.setAttribute('download', '');
                        formatList.appendChild(formatItem);
                    });
                    
                    // Show preview
                    const videoPreview = document.getElementById('videoPreview');
                    if (data.thumbnail) {
                        videoPreview.innerHTML = `
                            <img src="${data.thumbnail}" class="img-thumbnail mb-2" style="max-width: 100%">
                            <h6>${data.title}</h6>
                            <p class="text-muted">${data.duration}</p>
                        `;
                    }
                    
                    optionsDiv.style.display = 'block';
                } else {
                    resultDiv.innerHTML = `<div class="alert alert-danger">${data.message}</div>`;
                }
            } catch (error) {
                console.error(error);
                resultDiv.innerHTML = '<div class="alert alert-danger">Error processing video. Please try again.</div>';
            }
        });
    </script>
</body>
</html>
